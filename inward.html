<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salasar Paper Converter - ERP Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* styles.css */

.modal-overlay {
    position: fixed; /* Fixes the modal to the viewport */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6); /* Semi-transparent black background */
    display: flex; /* Use flexbox for centering */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    z-index: 1000; /* Ensure it's on top of other content */
    opacity: 1; /* Make it visible when active */
    transition: opacity 0.3s ease-in-out; /* Smooth transition */
}

.modal-overlay.hidden {
    opacity: 0; /* Hidden state */
    pointer-events: none; /* Prevents interaction when hidden */
}

.modal-content {
    background-color: white;
    padding: 20px;
    border-radius: 8ims.0.3s ease-in-out; /* Smooth transition */
}

.modal-overlay.hidden .modal-content {
    transform: translateY(-20px); /* Move content up slightly when hidden */
}

/* Custom styles for the searchable dropdown (Supplier field) */
.custom-select-wrapper {
    position: relative;
}

.custom-select-options {
    position: absolute;
    top: 100%; /* Position below the input */
    left: 0;
    right: 0;
    z-index: 10; /* Ensure it's above other form elements */
    background-color: white;
    border: 1px solid #e2e8f0; /* gray-200 */
    border-radius: 0.5rem; /* rounded-lg */
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
    max-height: 200px; /* Limit height for scrollability */
    overflow-y: auto; /* Enable scrolling */
    display: none; /* Hidden by default */
}

.custom-select-option {
    padding: 0.5rem 0.75rem; /* px-3 py-2 */
    cursor: pointer;
    font-size: 0.875rem; /* text-sm */
    color: #4a5568; /* gray-700 */
}

.custom-select-option:hover {
    background-color: #f7fafc; /* gray-50 */
    color: #2d3748; /* gray-800 */
}

.custom-select-option.add-new {
    font-weight: 600; /* font-semibold */
    color: #4299e1; /* blue-500 */
    border-top: 1px solid #e2e8f0; /* Separator for "add new" */
}

.custom-select-option.add-new:hover {
    background-color: #ebf8ff; /* blue-50 */
}

/* New: Hover effects for nav links */
.nav-link {
    padding: 0.5rem 0.75rem; /* Equivalent to px-3 py-2 */
    border-radius: 0.375rem; /* Equivalent to rounded-md */
    transition: background-color 0.2s, color 0.2s; /* Smooth transition */
}

.nav-link:hover {
    background-color: #eff6ff; /* blue-50 */
    color: #2563eb; /* blue-600 */
}

.mobile-nav-link {
    transition: background-color 0.2s; /* Smooth transition */
}
.mobile-nav-link:hover {
    background-color: #f7fafc; /* gray-100 */
}


 /* New: Hover effects for nav links */
.nav-link {
    padding: 0.5rem 0.75rem; /* Equivalent to px-3 py-2 */
    border-radius: 0.375rem; /* Equivalent to rounded-md */
    transition: background-color 0.2s, color 0.2s; /* Smooth transition */
}

.nav-link:hover {
    background-color: #eff6ff; /* blue-50 */
    color: #2563eb; /* blue-600 */
}

.mobile-nav-link {
    transition: background-color 0.2s; /* Smooth transition */
}
.mobile-nav-link:hover {
    background-color: #f7fafc; /* gray-100 */
}

.nav-link.active {
    background-color: #e0f2fe; /* blue-50 */
    color: #2563eb; /* blue-600 */
    font-weight: 600; /* font-semibold */
}

    </style>
</head>
<body>
<div class="header-fixed w-full border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-file-invoice text-blue-600 text-2xl mr-3"></i>
                    <h1 class="text-xl font-semibold text-gray-800 whitespace-nowrap shrink-0">Salasar Paper Converter</h1>
                </div>
                <nav class="desktop-nav flex items-center space-x-2 ml-8">
                    <a href="index.html" class="nav-link font-medium">Dashboard</a>
                    <a href="inward.html" class="nav-link font-medium">Inward</a>
                    <a href="cutting.html" class="nav-link font-medium">Cutting</a>
                    <a href="wrapping.html" class="nav-link font-medium">Wrapping</a>
                    <a href="warehousing.html" class="nav-link font-medium">Sifting/Staging</a>
                    <a href="compliance.html" class="nav-link font-medium">Breakdown</a>
                    <a href="accounts.html" class="nav-link font-medium">Accounts</a>
                </nav>

                <div class="flex items-center space-x-4">
                    <!-- Removed mobile menu button -->

                    <div class="relative">
                        <button id="notificationBtn" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-bell"></i>
                        </button>
                        <span class="absolute top-0 right-0 h-2 w-2 rounded-full bg-red-500"></span>
                    </div>
                    <div class="relative">
                        <button id="userMenuBtn" class="flex items-center space-x-2 text-gray-700 hover:text-gray-900">
                            <span class="hidden md:block font-medium">Admin</span>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                        <div id="userMenu" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20 hidden">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sign out</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
        <div class="bg-white rounded-lg shadow-sm p-4">
            <div class="flex items-center">
                <div class="rounded-full bg-blue-100 p-3 mr-4">
                    <i class="fas fa-boxes text-blue-600"></i>
                </div>
                <div>
                    <p class="text-sm text-gray-500">Total Inward</p>
                    <p id="totalInwardCount" class="text-xl font-semibold">0 Reels</p>
                </div>
            </div>
        </div>
        <div class="bg-white rounded-lg shadow-sm p-4">
            <div class="flex items-center">
                <div class="rounded-full bg-green-100 p-3 mr-4">
                    <i class="fas fa-check-circle text-green-600"></i>
                </div>
                <div>
                    <p class="text-sm text-gray-500">Processed (Valid)</p>
                    <p id="processedCount" class="text-xl font-semibold">0 Reels</p>
                </div>
            </div>
        </div>
        <div class="bg-white rounded-lg shadow-sm p-4">
            <div class="flex items-center">
                <div class="rounded-full bg-yellow-100 p-3 mr-4">
                    <i class="fas fa-clock text-yellow-600"></i>
                </div>
                <div>
                    <p class="text-sm text-gray-500">Pending</p>
                    <p id="pendingCount" class="text-xl font-semibold">0 Reels</p>
                </div>
            </div>
        </div>
        <div class="bg-white rounded-lg shadow-sm p-4">
            <div class="flex items-center">
                <div class="rounded-full bg-red-100 p-3 mr-4">
                    <i class="fas fa-times-circle text-red-600"></i>
                </div>
                <div>
                    <p class="text-sm text-gray-500">In-Valid</p>
                    <p id="invalidCount" class="text-xl font-semibold">0 Reels</p>
                </div>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow-sm">
        <div class="p-4 border-b border-gray-200 flex justify-between items-center">
            <h2 class="text-lg font-semibold text-gray-800">Recent Inward Records</h2>
            <div class="flex items-center space-x-2">
                <button id="addInwardButton" class="px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center">
                    <i class="fas fa-plus mr-2"></i>
                    Add Inward
                </button>
                <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center">
                    <i class="fas fa-filter mr-2"></i>
                    Filter
                </button>
                <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center">
                    <i class="fas fa-download mr-2"></i>
                    Export
                </button>
            </div>
        </div>
        <div class="table-container">
            <div class="overflow-x-auto">
                <table class="w-full" id="inwardRecordsTable">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date of Inward</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Reel Code</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Weight (kg)</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">To be proceed for</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Supplier</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Material Type</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Remarks</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th> <th class="px-4 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        </tbody>
                </table>
            </div>
        </div>
        <div class="p-4 border-t border-gray-200">
            <div class="flex items-center justify-between">
                <div class="text-sm text-gray-500">
                    Showing 1 to 10 of <span id="totalEntries">0</span> entries
                </div>
                <div class="flex space-x-2">
                    <button class="px-3 py-1 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50">
                        Previous
                    </button>
                    <button class="px-3 py-1 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                        Next
                    </button>
                </div>
            </div>
        </div>
    </div>
</main>

<footer class="bg-white border-t border-gray-200 mt-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
        <div class="flex flex-col md:flex-row justify-between items-center">
            <p class="text-sm text-gray-500">Â© 2025 Salasar Paper Converter. All rights reserved.</p>
            <div class="flex space-x-4 mt-4 md:mt-0">
                <a href="#" class="text-sm text-gray-500 hover:text-gray-700">Help Center</a>
                <a href="#" class="text-sm text-gray-500 hover:text-gray-700">Documentation</a>
                <a href="#" class="text-sm text-gray-500 hover:text-gray-700">Contact Support</a>
            </div>
        </div>
    </div>
</footer>

<div id="inwardEntryModal" class="modal-overlay hidden">
    <div class="modal-content">
        <div class="flex justify-between items-center border-b border-gray-200 pb-3 mb-4">
            <h2 class="text-lg font-semibold text-gray-800" id="inwardModalTitle">New Inward Entry</h2>
            <button id="closeModalButton" class="text-gray-500 hover:text-gray-700">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        <form class="p-4" id="newInwardForm">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Date of Inward</label>
                    <input type="date" name="inwardDate" id="inwardDateModal" required readonly
                        class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-100 cursor-not-allowed">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Reel Code</label>
                    <input type="text" name="reelCode" id="reelCodeModal" required
                        class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Weight (kg)</label>
                    <input type="number" name="weight" id="weightModal" required
                        class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">To be proceed for</label>
                    <select name="zone" id="zoneModal" required
                        class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="">Select Zone</option>
                        <option value="Cutting">Cutting</option>
                        <option value="Wrapping">Wrapping</option>
                    </select>
                </div>
                <div class="custom-select-wrapper">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Supplier</label>
                    <input type="text" id="supplierSearchInput" placeholder="Search or Add Supplier"
                        class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <input type="hidden" name="supplier" id="supplierHiddenInput">
                    <div id="supplierOptions" class="custom-select-options">
                        </div>
                </div>
                <div class="custom-select-wrapper">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Material Type</label>
                    <input type="text" id="materialTypeSearchInput" placeholder="Search or Add Material Type"
                        class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <input type="hidden" name="materialType" id="materialTypeHiddenInput">
                    <div id="materialTypeOptions" class="custom-select-options">
                        </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Width (cm)</label>
                    <input type="number" name="widthCm" id="widthCmModal"
                        class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Diameter (cm)</label>
                    <input type="number" name="diameterCm" id="diameterCmModal"
                        class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Remarks</label>
                    <textarea name="remarks" rows="3" id="remarksModal"
                        class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                </div>
            </div>
            <div class="mt-4 flex justify-end">
                <button type="submit" id="submitInwardFormButton" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center">
                    <i class="fas fa-plus mr-2"></i>
                    Create Entry
                </button>
            </div>
        </form>
    </div>
</div>

<div id="viewDetailsModal" class="modal-overlay hidden">
    <div class="modal-content">
        <div class="flex justify-between items-center border-b border-gray-200 px-6 py-4">
            <h2 class="text-xl font-semibold text-gray-800">Inward Entry Details</h2>
            <div class="flex items-center space-x-3 ml-auto">
                <div class="hidden md:block h-8 border-l border-gray-300"></div> <div class="flex items-center ml-3">
                    <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                    </div>
                    <div>
                        <span class="text-sm text-gray-500">Reel Code</span>
                        <p id="viewReelCode" class="font-medium text-gray-800"></p>
                    </div>
                </div>
            </div>
            <button id="closeViewModalButton" class="text-gray-500 hover:text-gray-700 ml-4">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <div class="p-6">
            <div class="overflow-hidden border border-gray-200 rounded-md">
                <table class="min-w-full divide-y divide-gray-200">
                    <tbody class="divide-y divide-gray-200">
                        <tr>
                            <td class="px-4 py-2 bg-gray-50 text-sm font-medium text-gray-500 w-1/3">
                                Date of Inward
                            </td>
                            <td id="viewInwardDate" class="px-4 py-2 text-sm text-gray-800"></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 bg-gray-50 text-sm font-medium text-gray-500">
                                Weight
                            </td>
                            <td id="viewWeight" class="px-4 py-2 text-sm text-gray-800"></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 bg-gray-50 text-sm font-medium text-gray-500">
                                To be Proceed For
                            </td>
                            <td id="viewZone" class="px-4 py-2 text-sm text-gray-800"></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 bg-gray-50 text-sm font-medium text-gray-500">
                                Supplier
                            </td>
                            <td id="viewSupplier" class="px-4 py-2 text-sm text-gray-800"></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 bg-gray-50 text-sm font-medium text-gray-500">
                                Material Type
                            </td>
                            <td id="viewMaterialType" class="px-4 py-2 text-sm text-gray-800"></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 bg-gray-50 text-sm font-medium text-gray-500">
                                Width
                            </td>
                            <td id="viewWidthCm" class="px-4 py-2 text-sm text-gray-800"></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 bg-gray-50 text-sm font-medium text-gray-500">
                                Diameter
                            </td>
                            <td id="viewDiameterCm" class="px-4 py-2 text-sm text-gray-800"></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 bg-gray-50 text-sm font-medium text-gray-500">
                                Remarks
                            </td>
                            <td id="viewRemarks" class="px-4 py-2 text-sm text-gray-800"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="p-6 border-t border-gray-200 flex justify-end items-center">
            <div id="viewStatusBadge" class="inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium mr-auto">
                <span class="w-1.5 h-1.5 inline-block rounded-full mr-1.5" id="viewStatusDot"></span>
                <span id="viewStatusText"></span>
            </div>

            <button id="verifyButton" class="ml-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium">
                Verify
            </button>
            <button id="editButton" class="ml-3 px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 text-sm font-medium">
                Edit
            </button>
            <button id="deleteButton" class="ml-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium">
                Delete
            </button>
        </div>
    </div>
</div>

<div id="verifyConfirmationModal" class="modal-overlay hidden">
    <div class="modal-content max-w-sm"> <div class="flex justify-between items-center border-b border-gray-200 pb-3 mb-4">
            <h2 class="text-lg font-semibold text-gray-800">Confirm Verification</h2>
            <button id="closeVerifyConfirmationModalButton" class="text-gray-500 hover:text-gray-700">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        <div class="p-4 text-center">
            <p class="text-gray-700 text-base mb-6">Do you want to verify this record?</p>
            <div class="flex justify-center space-x-4">
                <button id="confirmVerifyValidButton" class="px-5 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                    Valid
                </button>
                <button id="confirmVerifyInvalidButton" class="px-5 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                    In-Valid
                </button>
            </div>
        </div>
    </div>
</div>

<div id="deleteConfirmationModal" class="modal-overlay hidden">
    <div class="modal-content max-w-sm">
        <div class="flex justify-between items-center border-b border-gray-200 pb-3 mb-4">
            <h2 class="text-lg font-semibold text-gray-800">Confirm Deletion</h2>
            <button id="closeDeleteConfirmationModalButton" class="text-gray-500 hover:text-gray-700">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        <div class="p-4 text-center">
            <p class="text-gray-700 text-base mb-6">Are you sure you want to delete this record?</p>
            <div class="flex justify-center space-x-4">
                <button id="confirmDeleteYesButton" class="px-5 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                    Yes, Delete
                </button>
                <button id="confirmDeleteNoButton" class="px-5 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400">
                    No
                </button>
            </div>
        </div>
    </div>
</div>


<script>

    document.addEventListener('DOMContentLoaded', function () {
    // User menu toggle functionality
    const userMenuBtn = document.getElementById('userMenuBtn');
    const userMenu = document.getElementById('userMenu');

    if (userMenuBtn) {
        userMenuBtn.addEventListener('click', function() {
            userMenu.classList.toggle('hidden');
        });

        // Close user menu if clicked outside
        document.addEventListener('click', function(event) {
            if (!userMenuBtn.contains(event.target) && !userMenu.contains(event.target)) {
                userMenu.classList.add('hidden');
            }
        });
    }

    // Header scroll shadow functionality
    const header = document.querySelector('.header-fixed'); // Targets the fixed header class
    window.addEventListener('scroll', function() {
        if (window.scrollY > 0) {
            header.classList.add('shadow-scroll');
        } else {
            header.classList.remove('shadow-scroll');
        }
    });

    // Highlight active navigation item
    function highlightActiveNavItem() {
        const currentPath = window.location.pathname.split('/').pop(); // Get filename (e.g., "inward.html")
        // Selects both desktop and potentially existing mobile nav links (though mobile menu elements are removed)
        const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');

        navLinks.forEach(link => {
            const linkPath = link.getAttribute('href');
            if (linkPath === currentPath) {
                link.classList.add('active'); // Add 'active' class to the current page's link
            } else {
                link.classList.remove('active'); // Ensure other links are not active
            }
        });
    }

    // Call the highlight function when the page loads
    highlightActiveNavItem();
});
    // Sample data in JSON format
    let inwardRecords = [
        {
            inwardDate: "2025-06-17",
            reelCode: "RL001",
            weight: 500,
            zone: "Cutting",
            supplier: "ABC Suppliers",
            materialType: "Kraft Paper",
            widthCm: 120,
            diameterCm: 150,
            remarks: "Good condition",
            status: "Ready for Processing" // Added status
        },
        {
            inwardDate: "2025-06-17",
            reelCode: "RL002",
            weight: 350,
            zone: "Wrapping",
            supplier: "XYZ Mills",
            materialType: "Duplex Board",
            widthCm: 100,
            diameterCm: 130,
            remarks: "Minor tear on edge",
            status: "Ready for Processing" // Added status
        },
        {
            inwardDate: "2025-06-16",
            reelCode: "RL003",
            weight: 620,
            zone: "Cutting",
            supplier: "Paper Co.",
            materialType: "Art Paper",
            widthCm: 150,
            diameterCm: 160,
            remarks: "Standard delivery",
            status: "Ready for Processing" // Added status
        }
    ];

    // Initial list of suppliers
    let suppliers = ["ABC Suppliers", "XYZ Mills", "Paper Co.", "Global Paper Inc.", "Sunrise Papers"];
    // Initial list of material types
    let materialTypes = ["Kraft Paper", "Duplex Board", "Art Paper", "Coated Paper", "Recycled Paper"];


    // Variable to store the index of the currently viewed record
    let currentRecordIndex = null;
    // Flag to indicate if the inward entry form is in edit mode
    let isEditMode = false;


    // Ensure the DOM is fully loaded before trying to access elements
    document.addEventListener('DOMContentLoaded', function() {
        const inwardRecordsTableBody = document.querySelector('#inwardRecordsTable tbody');
        const totalEntriesSpan = document.getElementById('totalEntries');

        // Scorecard elements
        const totalInwardCount = document.getElementById('totalInwardCount'); // Updated ID
        const processedCount = document.getElementById('processedCount');
        const pendingCount = document.getElementById('pendingCount');
        const invalidCount = document.getElementById('invalidCount'); // New element for Invalid


        // Modal elements (for new entry form)
        const addInwardButton = document.getElementById('addInwardButton');
        const inwardEntryModal = document.getElementById('inwardEntryModal');
        const closeModalButton = document.getElementById('closeModalButton');
        const reelCodeModalInput = document.getElementById('reelCodeModal');
        const inwardDateModalInput = document.getElementById('inwardDateModal');

        // Supplier specific elements
        const supplierSearchInput = document.getElementById('supplierSearchInput');
        const supplierHiddenInput = document.getElementById('supplierHiddenInput');
        const supplierOptionsDiv = document.getElementById('supplierOptions');

        // Material Type specific elements
        const materialTypeSearchInput = document.getElementById('materialTypeSearchInput');
        const materialTypeHiddenInput = document.getElementById('materialTypeHiddenInput');
        const materialTypeOptionsDiv = document.getElementById('materialTypeOptions');


        const newInwardForm = document.getElementById('newInwardForm');
        const inwardModalTitle = document.getElementById('inwardModalTitle'); // Title of the new/edit modal
        const submitInwardFormButton = document.getElementById('submitInwardFormButton'); // Submit button of the form

        // Specific form input fields for editing
        const weightModalInput = document.getElementById('weightModal');
        const zoneModalInput = document.getElementById('zoneModal');
        const widthCmModalInput = document.getElementById('widthCmModal');
        const diameterCmModalInput = document.getElementById('diameterCmModal');
        const remarksModalInput = document.getElementById('remarksModal');

        // Modal elements (for viewing details)
        const viewDetailsModal = document.getElementById('viewDetailsModal');
        const closeViewModalButton = document.getElementById('closeViewModalButton');
        const viewReelCodeP = document.querySelector('#viewDetailsModal #viewReelCode');
        const viewInwardDateTd = document.querySelector('#viewDetailsModal #viewInwardDate');
        const viewWeightTd = document.querySelector('#viewDetailsModal #viewWeight');
        const viewZoneTd = document.querySelector('#viewDetailsModal #viewZone');
        const viewSupplierTd = document.querySelector('#viewDetailsModal #viewSupplier');
        const viewMaterialTypeTd = document.querySelector('#viewDetailsModal #viewMaterialType');
        const viewWidthCmTd = document.querySelector('#viewDetailsModal #viewWidthCm');
        const viewDiameterCmTd = document.querySelector('#viewDetailsModal #viewDiameterCm');
        const viewRemarksTd = document.querySelector('#viewDetailsModal #viewRemarks');
        const viewStatusBadge = document.getElementById('viewStatusBadge'); // Reference for the status badge container
        const viewStatusDot = document.getElementById('viewStatusDot');     // Reference for the status dot
        const viewStatusText = document.getElementById('viewStatusText');   // Reference for the status text

        // Verification Modal elements
        const verifyButton = document.getElementById('verifyButton');
        const verifyConfirmationModal = document.getElementById('verifyConfirmationModal');
        const closeVerifyConfirmationModalButton = document.getElementById('closeVerifyConfirmationModalButton');
        const confirmVerifyValidButton = document.getElementById('confirmVerifyValidButton');
        const confirmVerifyInvalidButton = document.getElementById('confirmVerifyInvalidButton');

        // New elements for Edit and Delete
        const editButton = document.getElementById('editButton');
        const deleteButton = document.getElementById('deleteButton');
        const deleteConfirmationModal = document.getElementById('deleteConfirmationModal');
        const closeDeleteConfirmationModalButton = document.getElementById('closeDeleteConfirmationModalButton');
        const confirmDeleteYesButton = document.getElementById('confirmDeleteYesButton');
        const confirmDeleteNoButton = document.getElementById('confirmDeleteNoButton');


        /**
         * Updates the scorecard display with current counts.
         */
        function updateScorecards() {
            let totalReels = inwardRecords.length;
            let processedReels = 0; // Valid
            let invalidReels = 0;   // In-Valid
            let pendingReels = 0;   // Ready for Processing

            inwardRecords.forEach(record => {
                if (record.status === 'Valid') {
                    processedReels++;
                } else if (record.status === 'In-Valid') {
                    invalidReels++;
                } else if (record.status === 'Ready for Processing') {
                    pendingReels++;
                }
            });

            if (totalInwardCount) {
                totalInwardCount.textContent = `${totalReels} Reels`;
            }
            if (processedCount) {
                processedCount.textContent = `${processedReels} Reels`;
            }
            if (invalidCount) { // New element for Invalid
                invalidCount.textContent = `${invalidReels} Reels`;
            }
            if (pendingCount) {
                pendingCount.textContent = `${pendingReels} Reels`;
            }
        }


        /**
         * Renders the inward records into the table.
         * Attaches event listeners for view icon.
         */
        function renderTable() {
            inwardRecordsTableBody.innerHTML = ''; // Clear existing rows
            inwardRecords.forEach((record, index) => {
                const row = document.createElement('tr');
                row.classList.add('hover:bg-gray-50');

                // Apply row background color based on status
                if (record.status === 'Valid') {
                    row.classList.add('bg-green-50');
                } else if (record.status === 'In-Valid') {
                    row.classList.add('bg-red-50');
                }

                // Determine badge styling for table row status
                let statusBadgeClasses = '';
                let statusDotClasses = '';
                if (record.status === 'Valid') {
                    statusBadgeClasses = 'bg-green-100 text-green-800 border border-green-200';
                    statusDotClasses = 'bg-green-500';
                } else if (record.status === 'In-Valid') {
                    statusBadgeClasses = 'bg-red-100 text-red-800 border border-red-200';
                    statusDotClasses = 'bg-red-500';
                } else { // Default or "Ready for Processing"
                    statusBadgeClasses = 'bg-gray-100 text-gray-800 border border-gray-200';
                    statusDotClasses = 'bg-gray-500';
                }


                row.innerHTML = `
                    <td class="px-4 py-3 whitespace-nowrap">${record.inwardDate}</td>
                    <td class="px-4 py-3 whitespace-nowrap">${record.reelCode}</td>
                    <td class="px-4 py-3 whitespace-nowrap">${record.weight}</td>
                    <td class="px-4 py-3 whitespace-nowrap">${record.zone}</td>
                    <td class="px-4 py-3 whitespace-nowrap">${record.supplier}</td>
                    <td class="px-4 py-3 whitespace-nowrap">${record.materialType}</td>
                    <td class="px-4 py-3 whitespace-nowrap">${record.remarks}</td>
                    <td class="px-4 py-3 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium ${statusBadgeClasses}">
                            <span class="w-1.5 h-1.5 inline-block rounded-full ${statusDotClasses} mr-1.5"></span>
                            ${record.status}
                        </span>
                    </td>
                    <td class="px-4 py-3 whitespace-nowrap text-center">
                        <button class="text-blue-600 hover:text-blue-800 view-details-btn" title="View Details" data-index="${index}">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mx-auto" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                                <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </td>
                `;
                inwardRecordsTableBody.appendChild(row);
            });
            updateTotalEntries();
            updateScorecards(); // Update scorecards after rendering table

            // Attach event listeners to all newly rendered view buttons
            document.querySelectorAll('.view-details-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const recordIndex = parseInt(this.dataset.index);
                    showViewDetailsModal(recordIndex);
                });
            });
        }

        /**
         * Populates and displays the view details modal with professional design.
         * @param {number} index - The index of the record in the inwardRecords array.
         */
        function showViewDetailsModal(index) {
            currentRecordIndex = index; // Store the index of the currently viewed record
            const record = inwardRecords[index];
            if (record) {
                // Populate elements in the new design structure
                viewReelCodeP.textContent = record.reelCode; // Reel Code is now in the header
                viewInwardDateTd.textContent = record.inwardDate;
                viewWeightTd.textContent = record.weight + ' kg';
                viewZoneTd.textContent = record.zone;
                viewSupplierTd.textContent = record.supplier;
                viewMaterialTypeTd.textContent = record.materialType;
                viewWidthCmTd.textContent = record.widthCm ? record.widthCm + ' cm' : 'N/A';
                viewDiameterCmTd.textContent = record.diameterCm ? record.diameterCm + ' cm' : 'N/A';
                viewRemarksTd.textContent = record.remarks || 'No remarks';

                // Update the status badge in the view details modal
                // Clear existing background/text classes
                viewStatusBadge.classList.remove('bg-green-50', 'text-green-700', 'border-green-200',
                                                   'bg-red-50', 'text-red-700', 'border-red-200',
                                                   'bg-gray-50', 'text-gray-700', 'border-gray-200');
                viewStatusDot.classList.remove('bg-green-500', 'bg-red-500', 'bg-gray-500');

                if (record.status === 'In-Valid') {
                    viewStatusBadge.classList.add('bg-red-50', 'text-red-700', 'border-red-200');
                    viewStatusDot.classList.add('bg-red-500');
                    // Hide Verify and Edit buttons if status is In-Valid
                    verifyButton.classList.add('hidden');
                    editButton.classList.add('hidden');
                    // Show Delete button if status is In-Valid
                    deleteButton.classList.remove('hidden');
                } else if (record.status === 'Valid') {
                    viewStatusBadge.classList.add('bg-green-50', 'text-green-700', 'border-green-200');
                    viewStatusDot.classList.add('bg-green-500');
                    // Hide Verify, Edit and Delete buttons if status is Valid
                    verifyButton.classList.add('hidden');
                    editButton.classList.add('hidden');
                    deleteButton.classList.add('hidden');
                } else { // Default or "Ready for Processing" - show all action buttons
                    viewStatusBadge.classList.add('bg-gray-50', 'text-gray-700', 'border-gray-200');
                    viewStatusDot.classList.add('bg-gray-500');
                    verifyButton.classList.remove('hidden');
                    editButton.classList.remove('hidden');
                    deleteButton.classList.remove('hidden');
                }
                viewStatusText.textContent = record.status;


                viewDetailsModal.classList.remove('hidden');
            }
        }

        /**
         * Updates the total number of entries displayed.
         */
        function updateTotalEntries() {
            if (totalEntriesSpan) {
                totalEntriesSpan.textContent = inwardRecords.length;
            }
        }

        /**
         * Generates the next sequential reel code based on existing entries in the inwardRecords array.
         * Format: RL followed by a 3-digit padded number (e.g., RL001, RL002).
         * @returns {string} The generated reel code.
         */
        function generateNextReelCode() {
            let maxReelNumber = 0;
            inwardRecords.forEach(record => {
                const match = record.reelCode.match(/^RL(\d+)$/);
                if (match && match[1]) {
                    const currentNumber = parseInt(match[1], 10);
                    if (!isNaN(currentNumber) && currentNumber > maxReelNumber) {
                        maxReelNumber = currentNumber;
                    }
                }
            });

            const nextNumber = maxReelNumber + 1;
            const nextReelCode = 'RL' + String(nextNumber).padStart(3, '0');
            return nextReelCode;
        }

        /**
         * Formats a Date object into 'YYYY-MM-DD' string.
         * @param {Date} date - The date object to format.
         * @returns {string} The formatted date string.
         */
        function getFormattedDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-indexed
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        /**
         * Renders the searchable supplier options based on the search input.
         * If no match, provides an "Add new" option.
         */
        function renderSupplierOptions() {
            const searchTerm = supplierSearchInput.value.toLowerCase();
            const filteredSuppliers = suppliers.filter(supplier =>
                supplier.toLowerCase().includes(searchTerm)
            );

            supplierOptionsDiv.innerHTML = ''; // Clear previous options
            if (filteredSuppliers.length > 0) {
                filteredSuppliers.forEach(supplier => {
                    const optionDiv = document.createElement('div');
                    optionDiv.classList.add('custom-select-option');
                    optionDiv.textContent = supplier;
                    optionDiv.addEventListener('click', function() {
                        supplierSearchInput.value = supplier;
                        supplierHiddenInput.value = supplier;
                        supplierOptionsDiv.style.display = 'none'; // Hide options after selection
                    });
                    supplierOptionsDiv.appendChild(optionDiv);
                });
            } else {
                // If no matching suppliers, offer to add a new one
                const noMatchDiv = document.createElement('div');
                noMatchDiv.classList.add('custom-select-option');
                noMatchDiv.textContent = `No supplier found. Add "${supplierSearchInput.value}"?`;
                noMatchDiv.classList.add('add-new');
                noMatchDiv.addEventListener('click', function() {
                    const newSupplierName = supplierSearchInput.value.trim();
                    if (newSupplierName && !suppliers.includes(newSupplierName)) {
                        suppliers.push(newSupplierName);
                        // Sort suppliers alphabetically after adding
                        suppliers.sort();
                        supplierSearchInput.value = newSupplierName;
                        supplierHiddenInput.value = newSupplierName;
                        supplierOptionsDiv.style.display = 'none'; // Hide options
                    }
                });
                supplierOptionsDiv.appendChild(noMatchDiv);
            }
            supplierOptionsDiv.style.display = 'block'; // Show options
        }

        /**
         * Renders the searchable material type options based on the search input.
         * If no match, provides an "Add new" option.
         */
        function renderMaterialTypeOptions() {
            const searchTerm = materialTypeSearchInput.value.toLowerCase();
            const filteredMaterialTypes = materialTypes.filter(type =>
                type.toLowerCase().includes(searchTerm)
            );

            materialTypeOptionsDiv.innerHTML = ''; // Clear previous options
            if (filteredMaterialTypes.length > 0) {
                filteredMaterialTypes.forEach(type => {
                    const optionDiv = document.createElement('div');
                    optionDiv.classList.add('custom-select-option');
                    optionDiv.textContent = type;
                    optionDiv.addEventListener('click', function() {
                        materialTypeSearchInput.value = type;
                        materialTypeHiddenInput.value = type;
                        materialTypeOptionsDiv.style.display = 'none'; // Hide options after selection
                    });
                    materialTypeOptionsDiv.appendChild(optionDiv);
                });
            } else {
                // If no matching material types, offer to add a new one
                const noMatchDiv = document.createElement('div');
                noMatchDiv.classList.add('custom-select-option');
                noMatchDiv.textContent = `No material type found. Add "${materialTypeSearchInput.value}"?`;
                noMatchDiv.classList.add('add-new');
                noMatchDiv.addEventListener('click', function() {
                    const newMaterialTypeName = materialTypeSearchInput.value.trim();
                    if (newMaterialTypeName && !materialTypes.includes(newMaterialTypeName)) {
                        materialTypes.push(newMaterialTypeName);
                        // Sort material types alphabetically after adding
                        materialTypes.sort();
                        materialTypeSearchInput.value = newMaterialTypeName;
                        materialTypeHiddenInput.value = newMaterialTypeName;
                        materialTypeOptionsDiv.style.display = 'none'; // Hide options
                    }
                });
                materialTypeOptionsDiv.appendChild(noMatchDiv);
            }
            materialTypeOptionsDiv.style.display = 'block'; // Show options
        }


        // Event listener for supplier search input
        if (supplierSearchInput) {
            supplierSearchInput.addEventListener('input', renderSupplierOptions);
            supplierSearchInput.addEventListener('focus', renderSupplierOptions); // Show options on focus

            // Hide options when clicking outside
            document.addEventListener('click', function(event) {
                if (!supplierSearchInput.parentElement.contains(event.target)) {
                    supplierOptionsDiv.style.display = 'none';
                }
            });
        }

        // Event listener for material type search input
        if (materialTypeSearchInput) {
            materialTypeSearchInput.addEventListener('input', renderMaterialTypeOptions);
            materialTypeSearchInput.addEventListener('focus', renderMaterialTypeOptions); // Show options on focus

            // Hide options when clicking outside
            document.addEventListener('click', function(event) {
                if (!materialTypeSearchInput.parentElement.contains(event.target)) {
                    materialTypeOptionsDiv.style.display = 'none';
                }
            });
        }


        // Event listener to open the new inward entry modal
        if (addInwardButton) {
            addInwardButton.addEventListener('click', function() {
                isEditMode = false; // Set to add mode
                inwardModalTitle.textContent = "New Inward Entry";
                submitInwardFormButton.innerHTML = '<i class="fas fa-plus mr-2"></i> Create Entry';
                inwardEntryModal.classList.remove('hidden');
                // Set the current date and reel code when the modal opens
                if (inwardDateModalInput) {
                    inwardDateModalInput.value = getFormattedDate(new Date());
                }
                if (reelCodeModalInput) {
                    reelCodeModalInput.value = generateNextReelCode();
                    reelCodeModalInput.readOnly = false; // Reel code editable for new entry
                    reelCodeModalInput.classList.remove('bg-gray-100', 'cursor-not-allowed');
                }
                // Clear and pre-fill supplier search input
                if (supplierSearchInput) {
                    supplierSearchInput.value = ''; // Clear previous search
                    supplierHiddenInput.value = ''; // Clear hidden value
                    renderSupplierOptions(); // Render all initial options
                }
                // Clear and pre-fill material type search input
                if (materialTypeSearchInput) {
                    materialTypeSearchInput.value = ''; // Clear previous search
                    materialTypeHiddenInput.value = ''; // Clear hidden value
                    renderMaterialTypeOptions(); // Render all initial options
                }
                newInwardForm.reset(); // Reset form fields for new entry
            });
        }

        // Event listener to close the new inward entry modal
        if (closeModalButton) {
            closeModalButton.addEventListener('click', function() {
                inwardEntryModal.classList.add('hidden');
                newInwardForm.reset(); // Reset the form fields
            });
        }

        // Close new inward entry modal if overlay is clicked
        if (inwardEntryModal) {
            inwardEntryModal.addEventListener('click', function(event) {
                if (event.target === inwardEntryModal) {
                    inwardEntryModal.classList.add('hidden');
                    newInwardForm.reset(); // Reset the form fields
                }
            });
        }

        // Event listener to close the view details modal
        if (closeViewModalButton) {
            closeViewModalButton.addEventListener('click', function() {
                viewDetailsModal.classList.add('hidden');
            });
        }

        // Close view details modal if overlay is clicked
        if (viewDetailsModal) {
            viewDetailsModal.addEventListener('click', function(event) {
                if (event.target === viewDetailsModal) {
                    viewDetailsModal.classList.add('hidden');
                }
            });
        }

        // Handle form submission for new inward entry AND editing
        if (newInwardForm) {
            newInwardForm.addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent actual form submission

                const formData = new FormData(event.target);
                const recordData = {
                    inwardDate: formData.get('inwardDate'),
                    reelCode: formData.get('reelCode'),
                    weight: parseFloat(formData.get('weight')),
                    zone: formData.get('zone'),
                    supplier: supplierHiddenInput.value, // Use hidden input for supplier
                    materialType: materialTypeHiddenInput.value, // Use hidden input for material type
                    widthCm: parseFloat(formData.get('widthCm')) || 0, // Default to 0 if empty/invalid
                    diameterCm: parseFloat(formData.get('diameterCm')) || 0, // Default to 0 if empty/invalid
                    remarks: formData.get('remarks')
                };

                if (isEditMode && currentRecordIndex !== null) {
                    // Update existing record
                    inwardRecords[currentRecordIndex] = {
                        ...inwardRecords[currentRecordIndex], // Keep existing status etc.
                        ...recordData
                    };
                    console.log("Record Updated:", inwardRecords[currentRecordIndex]);
                } else {
                    // Add new record
                    recordData.status = "Ready for Processing"; // New records start as "Ready for Processing"
                    inwardRecords.push(recordData);
                    console.log("New Inward Entry Added:", recordData);
                }

                inwardRecords.sort((a, b) => new Date(b.inwardDate) - new Date(a.inwardDate)); // Sort by date descending
                renderTable(); // Re-render the table with the new data

                inwardEntryModal.classList.add('hidden'); // Close modal after submission
                newInwardForm.reset(); // Reset the form fields
                isEditMode = false; // Reset edit mode flag
                currentRecordIndex = null; // Clear current record index
            });
        }

        // Event Listeners for Verify Confirmation Modal
        if (verifyButton) {
            verifyButton.addEventListener('click', function() {
                verifyConfirmationModal.classList.remove('hidden');
            });
        }

        if (closeVerifyConfirmationModalButton) {
            closeVerifyConfirmationModalButton.addEventListener('click', function() {
                verifyConfirmationModal.classList.add('hidden');
            });
        }

        if (confirmVerifyInvalidButton) {
            confirmVerifyInvalidButton.addEventListener('click', function() {
                if (currentRecordIndex !== null) {
                    inwardRecords[currentRecordIndex].status = 'In-Valid';
                    console.log("Record marked as In-Valid:", inwardRecords[currentRecordIndex]);
                    // Hide Verify and Edit buttons if status is In-Valid
                    verifyButton.classList.add('hidden');
                    editButton.classList.add('hidden');
                    // Show Delete button if status is In-Valid
                    deleteButton.classList.remove('hidden');
                }
                verifyConfirmationModal.classList.add('hidden');
                viewDetailsModal.classList.add('hidden'); // Close the details modal too
                renderTable(); // Re-render the main table to show updated status
                currentRecordIndex = null; // Clear the current record index
            });
        }

        if (confirmVerifyValidButton) {
            confirmVerifyValidButton.addEventListener('click', function() {
                if (currentRecordIndex !== null) {
                    inwardRecords[currentRecordIndex].status = 'Valid';
                    console.log("Record marked as Valid:", inwardRecords[currentRecordIndex]);
                    // Hide Verify, Edit and Delete buttons if status is Valid
                    verifyButton.classList.add('hidden');
                    editButton.classList.add('hidden');
                    deleteButton.classList.add('hidden');
                }
                verifyConfirmationModal.classList.add('hidden');
                viewDetailsModal.classList.add('hidden'); // Close the details modal too
                renderTable(); // Re-render the main table to show updated status
                currentRecordIndex = null; // Clear the current record index
            });
        }

        // Close verify confirmation modal if overlay is clicked
        if (verifyConfirmationModal) {
            verifyConfirmationModal.addEventListener('click', function(event) {
                if (event.target === verifyConfirmationModal) {
                    verifyConfirmationModal.classList.add('hidden');
                }
            });
        }

        // --- New Edit Button Logic ---
        if (editButton) {
            editButton.addEventListener('click', function() {
                if (currentRecordIndex !== null) {
                    isEditMode = true; // Set to edit mode
                    inwardModalTitle.textContent = "Edit Inward Entry";
                    submitInwardFormButton.innerHTML = '<i class="fas fa-save mr-2"></i> Update Entry';

                    const recordToEdit = inwardRecords[currentRecordIndex];

                    // Populate form fields with current record data
                    inwardDateModalInput.value = recordToEdit.inwardDate;
                    reelCodeModalInput.value = recordToEdit.reelCode;
                    reelCodeModalInput.readOnly = true; // Make reel code read-only during edit
                    reelCodeModalInput.classList.add('bg-gray-100', 'cursor-not-allowed');
                    weightModalInput.value = recordToEdit.weight;
                    zoneModalInput.value = recordToEdit.zone;
                    supplierSearchInput.value = recordToEdit.supplier;
                    supplierHiddenInput.value = recordToEdit.supplier; // Ensure hidden input is set for supplier
                    materialTypeSearchInput.value = recordToEdit.materialType; // Populate material type search input
                    materialTypeHiddenInput.value = recordToEdit.materialType; // Populate material type hidden input
                    widthCmModalInput.value = recordToEdit.widthCm;
                    diameterCmModalInput.value = recordToEdit.diameterCm;
                    remarksModalInput.value = recordToEdit.remarks;

                    inwardEntryModal.classList.remove('hidden'); // Show the form modal
                    viewDetailsModal.classList.add('hidden'); // Hide the view details modal
                }
            });
        }

        // --- New Delete Button Logic ---
        if (deleteButton) {
            deleteButton.addEventListener('click', function() {
                if (currentRecordIndex !== null) {
                    deleteConfirmationModal.classList.remove('hidden'); // Show delete confirmation
                }
            });
        }

        if (closeDeleteConfirmationModalButton) {
            closeDeleteConfirmationModalButton.addEventListener('click', function() {
                deleteConfirmationModal.classList.add('hidden');
            });
        }

        if (confirmDeleteNoButton) {
            confirmDeleteNoButton.addEventListener('click', function() {
                deleteConfirmationModal.classList.add('hidden');
            });
        }

        if (confirmDeleteYesButton) {
            confirmDeleteYesButton.addEventListener('click', function() {
                if (currentRecordIndex !== null) {
                    inwardRecords.splice(currentRecordIndex, 1); // Remove the record
                    console.log("Record deleted. Remaining records:", inwardRecords);
                }
                deleteConfirmationModal.classList.add('hidden');
                viewDetailsModal.classList.add('hidden'); // Close the details modal too
                renderTable(); // Re-render the main table
                currentRecordIndex = null; // Clear current record index
            });
        }

        // Close delete confirmation modal if overlay is clicked
        if (deleteConfirmationModal) {
            deleteConfirmationModal.addEventListener('click', function(event) {
                if (event.target === deleteConfirmationModal) {
                    deleteConfirmationModal.classList.add('hidden');
                }
            });
        }


        // Initial render of the table when the page loads
        renderTable();
    });
</script>
</body>
</html>